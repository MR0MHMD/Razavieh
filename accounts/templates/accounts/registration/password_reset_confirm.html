{% extends 'parent/base.html' %}
{% load static %}
{% block title %}بازنشانی رمز عبور{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/parent/forms.css' %}">
{% endblock %}

{% block body %}
  <h1 class="form-title">تنظیم رمز عبور جدید</h1>

  <form method="post" class="form-container" novalidate>
    {% csrf_token %}

    {# پیام‌های کلی خطا (غیر وابسته به فیلد خاص) #}
    {% if form.non_field_errors %}
      <div class="form-errors">
        {% for err in form.non_field_errors %}
          <p class="error-text">{{ err }}</p>
        {% endfor %}
      </div>
    {% endif %}

    {# حلقه روی تمام فیلدها، با استایل هماهنگ #}
    {% for field in form.visible_fields %}
        {% if field.help_text %}
          <small class="help-text">{{ field.help_text|safe }}</small>
        {% endif %}
      <div class="form-group">
        <label for="{{ field.id_for_label }}" class="form-label">
          {{ field.label }}{% if field.field.required %}<span style="color:var(--accent)">*</span>{% endif %}
        </label>
        {{ field }}

        {% if field.errors %}
          <div class="field-errors">
            {% for error in field.errors %}
              <p style="color: red" class="error-text">{{ error }}</p>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endfor %}

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">ثبت رمز جدید</button>
    </div>
  </form>
{% endblock %}