<!DOCTYPE html>
<html lang="fa" dir="rtl">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}{% endblock %}</title>

    <!-- ğŸ§± Base Styles -->
    <link rel="stylesheet" href="{% static 'css/parent/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/partials/layout.css' %}">

    <!-- ğŸ“¦ Block for extra page-specific styles -->
    {% block extra_css %}{% endblock %}

    <!-- ğŸŒ— Optional: JS for theme switch -->
    {#    <script defer src="{% static 'parent/theme.js' %}"></script>#}

</head>

<body data-auth="{{ request.user.is_authenticated|yesno:'true,false' }} " data-theme="light">
<!-- ğŸ•Œ Header (optional include later) -->
{% include 'partials/header.html' %}

<!-- ğŸ“œ Main content -->
<main class="container">
    {% block body %}{% endblock %}
</main>

<!-- ğŸ¦¶ Footer -->
{% include 'partials/footer.html' %}

<!-- ğŸ”§ Page-specific scripts -->
{% block scripts %}

{% endblock %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const body = document.body;
        const btn = document.getElementById('themeToggle');
        const savedTheme = localStorage.getItem('theme');

        if (savedTheme) body.setAttribute('data-theme', savedTheme);

        btn.addEventListener('click', () => {
            const current = body.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            btn.textContent = next === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        });

        // ØªÙ†Ø¸ÛŒÙ… Ø¢ÛŒÚ©ÙˆÙ† Ø§ÙˆÙ„ÛŒÙ‡
        btn.textContent = body.getAttribute('data-theme') === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const icons = document.querySelectorAll(".social-icons img");

        function updateIconsForTheme(theme) {
            icons.forEach(icon => {
                const lightSrc = icon.getAttribute("data-light");
                const darkSrc = icon.getAttribute("data-dark");

                if (theme === "dark") {
                    icon.src = darkSrc;
                } else {
                    icon.src = lightSrc;
                }
            });
        }

        // Ø§Ú¯Ø± Ø³Ø§ÛŒØªØª Ø¨Ø§ data-theme Ø±ÙˆÛŒ body Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡:
        const observer = new MutationObserver(() => {
            const theme = document.body.getAttribute("data-theme") || "light";
            updateIconsForTheme(theme);
        });

        observer.observe(document.body, {attributes: true, attributeFilter: ["data-theme"]});

        // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
        const initialTheme = document.body.getAttribute("data-theme") || "light";
        updateIconsForTheme(initialTheme);
    });
</script>
</body>
</html>