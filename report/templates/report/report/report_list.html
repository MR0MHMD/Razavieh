{% extends 'parent/base.html' %}
{% load static %}
{% load jformat %}

{% block title %}Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø±ÙˆØ²{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'report/css/report/report_list.css' %}">
{% endblock %}

{% block body %}
    {% if category %}
    	<h1>Ù„ÛŒØ³Øª Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡ Ø¨Ù†Ø¯ÛŒ {{ category }}</h1>
    {% elif tag %}
        <h1>Ù„ÛŒØ³Øª Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø±Ú†Ø³Ø¨ {{ tag }}</h1>
    {% else %}
        <h1 class="page-title"> Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø±ÙˆØ² Ù…Ø³Ø¬Ø¯</h1>
    {% endif %} 

<div class="container reports-container">
    {% if reports %}
    <div class="reports-grid">
        {% for report in reports %}
        <div class="report-card">
            <!-- ØªØµÙˆÛŒØ± -->
            <div class="report-thumb">
                {% if report.images.first %}
                    <img src="{{ report.images.first.image.url }}" alt="{{ report.title }}">
                {% else %}
                    <img src="{% static 'report/img/no-image.svg' %}" alt="Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±">
                {% endif %}
            </div>

            <!-- Ø¨Ø¯Ù†Ù‡ Ú©Ø§Ø±Øª -->
            <div class="report-body">
                <h2 class="report-title">{{ report.title }}</h2>
                <p class="report-description">{{ report.description|truncatewords:20 }}</p>
            </div>

            <!-- ÙÙˆØªØ± -->
            <div class="report-footer">
                <div class="report-meta">
                    <div class="meta-item like">
                        <button class="like-btn" data-id="{{ report.id }}">
                            {% if report.id in liked_reports %}
                                <img src="{% static 'report/icons/heart_full.svg' %}" alt="liked" class="icon">
                            {% else %}
                                <img src="{% static 'report/icons/heart_empty.svg' %}" alt="like" class="icon">
                            {% endif %}
                        </button>
                        <span class="count like-count">{{ report.likes }}</span>
                    </div>

                    <div class="meta-item">
                        <img src="{% static 'report/icons/view.svg' %}" alt="views" class="icon">
                        <span class="count">{{ report.views }}</span>
                    </div>

                    <div class="meta-item">
                        <img src="{% static 'report/icons/comment.svg' %}" alt="comments" class="icon">
                        <span class="count">{{ active_comments_count }}</span>
                    </div>

                    <div class="meta-item">
                        <img src="{% static 'report/icons/date.svg' %}" alt="date" class="icon">
                        <span class="count">{{ report.date|jformat:"%Y/%m/%d" }}</span>
                    </div>
                </div>

                <a href="{{ report.get_absolute_url }}" class="btn btn-primary full-width-btn">Ù…Ø´Ø§Ù‡Ø¯Ù‡</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="no-report">Ù‡Ù†ÙˆØ² Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª ðŸ˜”</p>
    {% endif %}
</div>
        {% include 'partials/pagination.html' with page=reports %}

{% endblock %}

{% block scripts %}
<script src="{% static 'report/js/report_likes.js' %}"></script>
{% endblock %}