{% extends 'parent/base.html' %}
{% load static %}
{% load jformat %}
{% block title %}Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'report/css/report/report_list.css' %}">
{% endblock %}

{% block body %}
    <div class="container search-results-container">
        <h1>Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ</h1>

        {% if query %}
            <p class="search-query">Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ: <strong>{{ query }}</strong></p>

            {% if results %}
                <div class="reports-grid">
                    {% for report in results %}
                        <div class="report-card">
                            <!-- ØªØµÙˆÛŒØ± -->
                            <div class="report-thumb">
                                {% if report.images.first %}
                                    <img src="{{ report.images.first.image.url }}" alt="{{ report.title }}">
                                {% else %}
                                    <img src="{% static 'report/img/no-image.svg' %}" alt="Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±">
                                {% endif %}
                            </div>

                            <!-- Ø¨Ø¯Ù†Ù‡ Ú©Ø§Ø±Øª -->
                            <div class="report-body">
                                <h2 class="report-title">{{ report.title }}</h2>
                                <p class="report-description">{{ report.description|truncatewords:20 }}</p>
                            </div>

                            <!-- ÙÙˆØªØ± -->
                            <div class="report-footer">
                                <div class="report-meta">
                                    <div class="meta-item like">
                                        <button class="like-btn" data-id="{{ report.id }}">
                                            {% if report.id in liked_reports %}
                                                <img src="{% static 'report/icons/heart_full.svg' %}" alt="liked"
                                                     class="icon">
                                            {% else %}
                                                <img src="{% static 'report/icons/heart_empty.svg' %}" alt="like"
                                                     class="icon">
                                            {% endif %}
                                        </button>
                                        <span class="count like-count">{{ report.likes }}</span>
                                    </div>

                                    <div class="meta-item">
                                        <img src="{% static 'report/icons/view.svg' %}" alt="views" class="icon">
                                        <span class="count">{{ report.views }}</span>
                                    </div>

                                    <div class="meta-item">
                                        <img src="{% static 'report/icons/comment.svg' %}" alt="comments" class="icon">
                                        <span class="count">{{ report.comments_count }}</span>
                                    </div>

                                    <div class="meta-item">
                                        <img src="{% static 'report/icons/date.svg' %}" alt="date" class="icon">
                                        <span class="count">{{ report.date|jformat:"%Y/%m/%d" }}</span>
                                    </div>
                                </div>

                                <a href="{{ report.get_absolute_url }}"
                                   class="btn btn-primary full-width-btn">Ù…Ø´Ø§Ù‡Ø¯Ù‡</a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-results">Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯ ğŸ˜”</p>
            {% endif %}
        {% else %}
            <p class="empty-search">Ù„Ø·ÙØ§Ù‹ Ø¹Ø¨Ø§Ø±ØªÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ğŸ”</p>
        {% endif %}
    </div>
{% endblock %}